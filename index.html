<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMEN Studies File Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .form-container {
            width: 300px;
            padding: 20px;
            background-color: #f9f9f9;
            border-right: 1px solid #ddd;
        }
        .content-container {
            flex-grow: 1;
            display: flex;
        }
        .titles-container {
            width: 300px;
            border-right: 1px solid #ddd;
            padding: 20px;
        }
        .preview-container {
            flex-grow: 1;
            padding: 20px;
        }
        input, button {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            box-sizing: border-box;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        #fileList {
            list-style-type: none;
            padding: 0;
            max-height: 500px;
            overflow-y: auto;
        }
        #fileList li {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            cursor: pointer;
        }
        #fileList li:hover {
            background-color: #f0f0f0;
        }
        #filePreview {
            border: 1px solid #ddd;
            min-height: 500px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .context-menu {
            position: absolute;
            background-color: white;
            border: 1px solid #ddd;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        .context-menu ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        .context-menu li {
            padding: 10px;
            cursor: pointer;
        }
        .context-menu li:hover {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="form-container">
            <h2>DMEN Studies File</h2>
            <form id="uploadForm">
                <input type="date" id="date" required>
                <input type="text" id="subject" placeholder="Subject" required>
                <input type="text" id="chapter" placeholder="Chapter" required>
                <input type="text" id="remarks" placeholder="Remarks">
                <input type="text" id="fileLink" placeholder="File Link" required>
                <button type="submit">Submit</button>
            </form>
        </div>
        <div class="content-container">
            <div class="titles-container">
                <h3>Titles</h3>
                <ul id="fileList"></ul>
            </div>
            <div class="preview-container">
                <h3>File Preview</h3>
                <div id="filePreview">
                    <p>Select a document to view</p>
                </div>
            </div>
        </div>
    </div>

    <div id="contextMenu" style="display:none; position:absolute;">
        <ul>
            <li id="openLink">Open in New Page</li>
            <li id="removeLink">Remove</li>
        </ul>
    </div>

    <script>
        document.getElementById('uploadForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Get form values
            const date = document.getElementById('date').value;
            const subject = document.getElementById('subject').value;
            const chapter = document.getElementById('chapter').value;
            const remarks = document.getElementById('remarks').value;
            const fileLink = document.getElementById('fileLink').value;
            
            // Create list item
            const fileList = document.getElementById('fileList');
            const listItem = document.createElement('li');
            listItem.textContent = `${date} - ${subject} - ${chapter} - ${remarks}`;
            listItem.dataset.link = fileLink;
            
            // Add click event to show preview
            listItem.addEventListener('click', function() {
                const filePreview = document.getElementById('filePreview');
                filePreview.innerHTML = `<iframe src="${this.dataset.link}" width="100%" height="500px"></iframe>`;
            });
            
            // Add context menu event
            listItem.addEventListener('contextmenu', function(event) {
                event.preventDefault();
                showContextMenu(event, listItem);
            });
            
            // Append to list
            fileList.appendChild(listItem);
            
            // Save to localStorage
            const files = JSON.parse(localStorage.getItem('files') || '[]');
            files.push({ 
                date, 
                subject, 
                chapter, 
                remarks, 
                fileLink 
            });
            localStorage.setItem('files', JSON.stringify(files));
            
            // Reset form
            document.getElementById('uploadForm').reset();
        });

        // Load files from localStorage on page load
        window.addEventListener('load', function() {
            const files = JSON.parse(localStorage.getItem('files') || '[]');
            const fileList = document.getElementById('fileList');
            
            files.forEach(file => {
                const listItem = document.createElement('li');
                listItem.textContent = `${file.date} - ${file.subject} - ${file.chapter} - ${file.remarks}`;
                listItem.dataset.link = file.fileLink;
                
                // Add click event to show preview
                listItem.addEventListener('click', function() {
                    const filePreview = document.getElementById('filePreview');
                    filePreview.innerHTML = `<iframe src="${this.dataset.link}" width="100%" height="500px"></iframe>`;
                });
                
                // Add context menu event
                listItem.addEventListener('contextmenu', function(event) {
                    event.preventDefault();
                    showContextMenu(event, listItem);
                });
                
                fileList.appendChild(listItem);
            });
        });

        // Context menu functionality
        function showContextMenu(event, listItem) {
            const contextMenu = document.getElementById('contextMenu');
            contextMenu.style.display = 'block';
            contextMenu.style.left = `${event.pageX}px`;
            contextMenu.style.top = `${event.pageY}px`;
            
            // Open link
            document.getElementById('openLink').onclick = function() {
                window.open(listItem.dataset.link, '_blank');
                contextMenu.style.display = 'none';
            };
            
            // Remove item
            document.getElementById('removeLink').onclick = function() {
                // Remove from list
                listItem.remove();
                
                // Remove from localStorage
                const files = JSON.parse(localStorage.getItem('files') || '[]');
                const updatedFiles = files.filter(file => 
                    `${file.date} - ${file.subject} - ${file.chapter} - ${file.remarks}` !== listItem.textContent
                );
                localStorage.setItem('files', JSON.stringify(updatedFiles));
                
                contextMenu.style.display = 'none';
            };
            
            // Hide context menu when clicking elsewhere
            document.addEventListener('click', function() {
                contextMenu.style.display = 'none';
            }, { once: true });
        }
    </script>
</body>
</html>
